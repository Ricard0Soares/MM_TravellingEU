<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="lisboa.css">
    <link rel="stylesheet" type="text/css" href="navBar.css">
</head>

<body>
    <nav class="navbar">
        <div class="logo"><a href="home.html">TravellingEU</a></div>
        <ul class="nav-links">
            <li><a href="screens/navLinks/destinations.html">Destinations</a></li>
            <li><a href="screens/videos/videos.html">Videos</a></li>
            <li><a href="screens/navLinks/howitworks.html">How it works</a></li>
            <li><a href="screens/navLinks/aboutus.html">About Us</a></li>
        </ul>
    </nav>

    <div class="ellipse-container">
        <p>Lisboa</p>
        <div class="image-container">
            <img src="images/lisboa.png" alt="lisboa">
            <span>Lisboa é a capital e maior cidade de Portugal, com uma população estimada 
                de 548.703 habitantes em 2022 dentro dos seus limites administrativos numa 
                área de cerca de 100 quilómetros quadrados.</span>
        </div>
    </div>

    <div class="second-ellipse-container">
        <div class="video-container">
            <video id="myVideo" controls muted>
                <source src="teste.mp4" type="video/mp4">
            </video>
            <div id="overlay" class="overlay">
                <a href="home.html" id="link1" style="top: 10%; left: 10%;">Learn more about Lisbon</a>
                <a href="paris.html" id="link2" style="top: 20%; left: 20%;">Learn more about Paris</a>
            </div>
            <div class="thumbnails" id="thumbnails" ></div>
        </div>
    </div>

    <div class="third-ellipse-container">
        <div class="photos-container">
            <img src="images/image_3.png" alt="cidade1">
        </div>
        <div class="photos-container">
            <img src="images/image_4.png" alt="cidade2">
        </div>
        <div class="photos-container">
            <img src="images/image_5.png" alt="cidade3">
        </div>
        <div class="photos-container">
            <img src="images/image_3.png" alt="cidade5">
        </div>
        <div class="photos-container">
            <img src="images/image_4.png" alt="cidade6">
        </div>
    </div>
    
    
    <script>
        var video = document.getElementById('myVideo');
        var overlay = document.getElementById('overlay');
        var thumbnailsContainer = document.getElementById('thumbnails');

        // Função para gerar thumbnails
        function generateThumbnails() {
            var interval = video.duration / 5; // Gera 5 thumbnails para um vídeo de duração total
            var index = 1;

            function captureThumbnail(time, index) {
                var canvas = document.createElement('canvas');
                canvas.width = 100;
                canvas.height = 56; // Ajuste conforme necessário para manter a proporção
                var ctx = canvas.getContext('2d');

                video.currentTime = time;
                video.pause();

                setTimeout(function() {
                    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
                    var thumbnail = document.createElement('img');
                    thumbnail.src = canvas.toDataURL('image/jpeg'); // Exporta o canvas como imagem
                    thumbnail.alt = 'Thumbnail ' + index;
                    thumbnail.setAttribute('data-time', time.toFixed(2)); // Armazena o tempo associado ao thumbnail

                    thumbnail.onclick = function() {
                        video.currentTime = time;
                    };

                    thumbnailsContainer.appendChild(thumbnail);
                }, 200); // Aguarda um breve momento para garantir que o quadro esteja capturado
            }

            // Espera que o vídeo esteja pronto antes de capturar miniaturas
            video.onloadeddata = function() {
                var currentTime = 0;

                while (currentTime < video.duration) {
                    captureThumbnail(currentTime, index);
                    currentTime += interval;
                    index++;
                }
            };
        }

        // Gera as thumbnails quando o vídeo estiver carregado
        video.addEventListener('loadedmetadata', function() {
            generateThumbnails();
        });

        video.addEventListener('timeupdate', function() {
            var currentTime = video.currentTime;

            //links em intervalos de tempo especificos
            if (currentTime >= 5 && currentTime < 10) {
                document.getElementById('link1').style.display = 'block';
                document.getElementById('link2').style.display = 'none';
                overlay.style.display = 'block';
            } else if (currentTime >= 10 && currentTime < 15) {
                document.getElementById('link1').style.display = 'none';
                document.getElementById('link2').style.display = 'block';
                overlay.style.display = 'block';
            } else {
                overlay.style.display = 'none';
            }
        });

    </script>

</body>
</html>
