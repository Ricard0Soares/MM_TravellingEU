<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="../styles/monumentos.css">
    <link rel="stylesheet" type="text/css" href="../styles/navBar.css">
</head>
<body>
    <nav class="navbar">
        <div class="logo"><a href="home.html">TravellingEU</a></div>
        <ul class="nav-links">
            <li><a href="navLinks/destinations.html">Destinations</a></li>
            <li><a href="videos/videos.html">Videos</a></li>
            <li><a href="navLinks/howitworks.html">How it works</a></li>
            <li><a href="navLinks/aboutus.html">About Us</a></li>
            <li class="dropdown">
                <select id="theme-selector" onchange="switchTheme(this.value)">
                    <option value="default">Default</option>
                    <option value="dark">Dark</option>
                    <option value="yellow">Yellow</option>
                </select>
            </li>
        </ul>
    </nav>

    <div class="centered-title">
        <h1>Padrão dos Descobrimentos</h1>

        <button id="toggleContainer">Toggle Teste Container</button>
    </div>

    <div class="content">
        <div class="video-container">
            <video id="myVideo" controls>
                <source src="../videos/padrao.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>
        <div class="index-container">
            <h2>Content Index</h2>
            <ul>
                <li><a href="#" id="section1" data-time="10">1. Section 1</a></li>
                <li><a href="#" id="section2" data-time="15">2. Section 2</a></li>
                <li><a href="#" id="section3" data-time="18">3. Section 3</a></li>
                <li><a href="#" id="section4" data-time="22">4. Section 4</a></li>
            </ul>
        </div>

        <div class="teste-container" style="display: none;">
            <h2>Padrão dos Descobrimentos</h2>
            <p>É um mosteiro português, mandado construir no final do século XV pelo rei D. Manuel I e estava entregue à Ordem de São Jerónimo. 
                Situa-se na freguesia de Belém, na cidade e concelho de <a href="home_lisboa.html">Lisboa</a>. Tem, desde 2016, o estatuto de Panteão Nacional.</p>
        </div>
    </div>        

    <script src="../scripts/searchbarHome.js"></script>
    <script src="../scripts/theme.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const video = document.getElementById('myVideo');
            const links = document.querySelectorAll('.index-container ul li a');
            const times = Array.from(links).map(link => parseFloat(link.getAttribute('data-time')));
            const toggleButton = document.getElementById('toggleContainer');
            const indexContainer = document.querySelector('.index-container');
            const testeContainer = document.querySelector('.teste-container');
            
            // Check localStorage for the container state and apply it
            const isTesteContainerVisible = localStorage.getItem('testeContainerVisible') === 'true';

            if (isTesteContainerVisible) {
                indexContainer.style.display = 'none';
                testeContainer.style.display = 'block';
            } else {
                indexContainer.style.display = 'block';
                testeContainer.style.display = 'none';
            }

            links.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const time = this.getAttribute('data-time');
                    video.currentTime = time;
                    video.play();
                });
            });

            video.addEventListener('timeupdate', function() {
                let currentTime = video.currentTime;
                let activeIndex = times.findIndex(time => currentTime < time) - 1;
                if (activeIndex === -2) activeIndex = times.length - 1;

                links.forEach((link, index) => {
                    if (index === activeIndex) {
                        link.classList.add('highlight');
                    } else {
                        link.classList.remove('highlight');
                    }
                });
            });

            // Toggle between index-container and teste-container and store the state in localStorage
            toggleButton.addEventListener('click', function() {
                if (indexContainer.style.display === 'none') {
                    indexContainer.style.display = 'block';
                    testeContainer.style.display = 'none';
                    localStorage.setItem('testeContainerVisible', 'false');
                } else {
                    indexContainer.style.display = 'none';
                    testeContainer.style.display = 'block';
                    localStorage.setItem('testeContainerVisible', 'true');
                }
            });
        });
    </script>
</body>
</html>
